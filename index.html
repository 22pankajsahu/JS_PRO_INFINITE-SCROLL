<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Scroll</title>
    <meta name="author" content="PANKAJ SAHU">
    <meta name="keywords" content="Infinite Scroll, Image Gallery, Unsplash API, User-Friendly, Responsive Design, Smooth Scrolling, Picture Exploration, Web Application, Lazy Loading, Interactive, Image Viewer, Endless Stream, Online Photography, Visual Experience, Web Development">
    <meta name="description" content="The Infinite Scroll web application allows users to seamlessly explore a never-ending stream of captivating pictures sourced from Unsplash. With an elegant user interface and smooth scrolling, users can discover and click on images to view more details. The application automatically loads additional images as the user reaches the end of the page, ensuring an uninterrupted visual journey.">

    <style>
        /* styles.css */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
        }

        #container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            padding: 20px;
        }

        header {
            text-align: center;
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            font-family: 'Croissant One', cursive;
        }

        #outputContainer {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
        }

        a {
            width: 40%;
            box-shadow: 5px 0 15px black;
        }

        img {
            width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div id="container">
        <header>
            <h1>Endless Scrolling</h1>
        </header>

        <div id="outputContainer"></div>
    </div>

    <script>
        // app.js
        const imageContainer = document.getElementById("outputContainer");

        let photosArray = [];

        let ready = false;
        let imagesLoaded = 0;
        let totalImages = 0;

        const count = 10;
        const apikey = "_DDIVJSgdK-GI1wA3aHOtxC9YTt8tCY6-4jMk7guznY";
        const apiUrl = `https://api.unsplash.com/photos/random/?client_id=${apikey}&count=${count}`;

        async function getPhotos() {
            try {
                const response = await fetch(apiUrl);
                photosArray = await response.json();
                displayPhotos();
            } catch (error) {
                console.error(error);
            }
        }

        function setAttribute(element, attributes) {
            for (const key in attributes) {
                element.setAttribute(key, attributes[key]);
            }
        }

        function imageLoaded() {
            imagesLoaded++;
            if (imagesLoaded === totalImages) {
                ready = true;
                console.log("ready", ready);
            }
        }

        function displayPhotos() {
            totalImages = photosArray.length;
            imagesLoaded = 0;

            photosArray.forEach((photo) => {
                const item = document.createElement("a");
                setAttribute(item, {
                    href: photo.links.html,
                    target: "_blank",
                });

                const img = document.createElement("img");
                setAttribute(img, {
                    src: photo.urls.regular,
                    alt: photo.alt_description,
                    title: photo.alt_description,
                });

                img.addEventListener("load", imageLoaded);
                item.appendChild(img);
                imageContainer.appendChild(item);
            });
        }

        window.addEventListener("scroll", () => {
            if (
                window.scrollY + window.innerHeight >= document.body.offsetHeight &&
                ready
            ) {
                ready = false;
                getPhotos();
            }
        });

        getPhotos();

    </script>
</body>

</html>
